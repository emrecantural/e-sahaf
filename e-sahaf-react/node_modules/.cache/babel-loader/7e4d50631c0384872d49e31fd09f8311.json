{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.withState = exports.FormDataContext = exports.FormActionsContext = exports.FORM_DATA = exports.initial = exports.DEFAULT_CHANNEL = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _forwardRef = _interopRequireDefault(require(\"react-context-toolbox/forwardRef\"));\n\nvar _shallowequal = _interopRequireDefault(require(\"shallowequal\"));\n\nvar _ErrorUtils = require(\"./utils/ErrorUtils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar DEFAULT_CHANNEL = '@@parent';\nexports.DEFAULT_CHANNEL = DEFAULT_CHANNEL;\n\nvar isEqualOrNullish = function isEqualOrNullish(a, b) {\n  return a === b || a == null && b == null;\n};\n\nvar initial = {\n  errors: _ErrorUtils.EMPTY_ERRORS,\n  touched: {},\n  submits: {\n    submitCount: 0,\n    submitAttempts: 0,\n    submitting: false\n  }\n};\nexports.initial = initial;\nvar FORM_DATA = {\n  VALUE: 1,\n  ERRORS: 2,\n  TOUCHED: 4,\n  SUBMITS: 8,\n  YUP_CONTEXT: 16,\n  NO_VALIDATE: 32\n};\nexports.FORM_DATA = FORM_DATA;\n\nvar FormActionsContext = _react.default.createContext(null);\n\nexports.FormActionsContext = FormActionsContext;\n\nvar FormDataContext = _react.default.createContext(initial, function (prev, next) {\n  var changed = 0;\n  if (!(0, _shallowequal.default)(prev.errors, next.errors)) changed |= FORM_DATA.ERRORS;\n  if (!(0, _shallowequal.default)(prev.submits, next.submits)) changed |= FORM_DATA.SUBMITS;\n  if (!isEqualOrNullish(prev.value, next.value)) changed |= FORM_DATA.VALUE;\n  return changed;\n});\n\nexports.FormDataContext = FormDataContext;\n\nvar withState = function withState(render, bits, opts) {\n  return (0, _forwardRef.default)(function (props, ref) {\n    return _react.default.createElement(FormDataContext.Consumer, {\n      unstable_observedBits: bits\n    }, function (context) {\n      return render(context, props, ref);\n    });\n  }, opts || {});\n};\n\nexports.withState = withState;","map":null,"metadata":{},"sourceType":"script"}