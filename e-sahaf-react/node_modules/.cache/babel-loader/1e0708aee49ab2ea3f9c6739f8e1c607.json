{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _memoizeOne = _interopRequireDefault(require(\"memoize-one\"));\n\nvar _elementType = _interopRequireDefault(require(\"prop-types-extra/lib/elementType\"));\n\nvar _createEventHandler = _interopRequireDefault(require(\"./utils/createEventHandler\"));\n\nvar _ErrorUtils = require(\"./utils/ErrorUtils\");\n\nvar _Contexts = require(\"./Contexts\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n/**\n * A Form submit button, for triggering validations for the entire form or specific fields.\n */\n\n\nvar FormSubmit =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(FormSubmit, _React$Component);\n\n  function FormSubmit() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.eventHandlers = {};\n    _this.getEventHandlers = (0, _createEventHandler.default)(function (event) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        _this.props[event] && _this.props[event](args);\n\n        _this.handleSubmit();\n      };\n    });\n    _this.memoFilterAndMapErrors = (0, _memoizeOne.default)(_ErrorUtils.filterAndMapErrors, function (_ref, _ref2) {\n      var a = _ref[0];\n      var b = _ref2[0];\n      return a.errors === b.errors && a.names === b.names && a.maperrors === b.maperrors;\n    });\n    return _this;\n  }\n\n  var _proto = FormSubmit.prototype;\n\n  _proto.handleSubmit = function handleSubmit(event, args) {\n    var _this$props = this.props,\n        actions = _this$props.actions,\n        triggers = _this$props.triggers;\n\n    if (!actions) {\n      return process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(false, 'A Form submit event ' + 'was triggered from a component outside the context of a Form. ' + 'The Button should be wrapped in a Form component') : void 0;\n    }\n\n    if (triggers && triggers.length) actions.onValidate(triggers, event, args);else actions.onSubmit();\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        events = _this$props2.events,\n        triggers = _this$props2.triggers,\n        children = _this$props2.children,\n        errors = _this$props2.errors,\n        submits = _this$props2.submits,\n        Component = _this$props2.as,\n        _1 = _this$props2.actions,\n        props = _objectWithoutPropertiesLoose(_this$props2, [\"events\", \"triggers\", \"children\", \"errors\", \"submits\", \"as\", \"actions\"]);\n\n    var partial = triggers && triggers.length;\n\n    if (partial) {\n      errors = this.memoFilterAndMapErrors({\n        errors: errors,\n        names: triggers\n      });\n    }\n\n    props = _extends(props, this.getEventHandlers(events));\n    return typeof children === 'function' ? children(_extends({\n      errors: errors,\n      props: props\n    }, submits)) : _react.default.createElement(Component, _extends({\n      type: partial ? 'button' : 'submit'\n    }, props), children);\n  };\n\n  return FormSubmit;\n}(_react.default.Component);\n\nFormSubmit.propTypes = {\n  /**\n   * The `<button/>` type\n   */\n  type: _propTypes.default.oneOf(['button', 'submit']),\n\n  /**\n   * Specify particular fields to validate in the related form. If empty the entire form will be validated.\n   */\n  triggers: _propTypes.default.arrayOf(_propTypes.default.string.isRequired),\n\n  /**\n   * Provide a render function to completely override the rendering behavior\n   * of FormSubmit (`as` will be ignored). In addition to passing through props some\n   * additional form submission metadata is injected to handle loading and disabled behaviors.\n   *\n   * ```js\n   * <Form.Submit>\n   *   {({ errors, props, submitting, submitCount, submitAttempts }) =>\n   *     <button {...props} disabled={submitCount > 1}>\n   *       submitting ? 'Savingâ€¦' : 'Submit'}\n   *     </button>\n   * </Form.Submit>\n   * ```\n   */\n  children: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n\n  /**\n   * Control the rendering of the Form Submit component when not using\n   * the render prop form of `children`.\n   */\n  as: _elementType.default,\n\n  /**\n   * A string or array of event names that trigger validation.\n   *\n   * @default 'onClick'\n   */\n  events: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.arrayOf(_propTypes.default.string)]),\n\n  /** @private */\n  errors: _propTypes.default.object,\n\n  /** @private */\n  actions: _propTypes.default.object,\n\n  /** @private */\n  submits: _propTypes.default.object\n};\nFormSubmit.defaultProps = {\n  as: 'button',\n  events: ['onClick']\n};\n\nvar _default = (0, _Contexts.withState)(function (ctx, props, ref) {\n  return _react.default.createElement(_Contexts.FormActionsContext.Consumer, null, function (actions) {\n    return _react.default.createElement(FormSubmit, _extends({}, props, {\n      ref: ref,\n      actions: actions,\n      submits: ctx.submits,\n      errors: ctx.errors\n    }));\n  });\n}, _Contexts.FORM_DATA.errors | _Contexts.FORM_DATA.SUBMITS);\n\nexports.default = _default;\nmodule.exports = exports[\"default\"];","map":null,"metadata":{},"sourceType":"script"}